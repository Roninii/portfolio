{"parsed":{"_path":"/blog/theme-toggle-composition-api","_dir":"blog","_draft":false,"_partial":false,"_locale":"","title":"Build A Dark Theme Toggle With The Composition API","description":"Using the Vue 3 composition api to build a theme toggler.","author":"Ronnie Villarini","date":"2020-08-17","image":"/img/theme-banner.jpg","imageAlt":"An amusement park at night.","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I recently built a theme toggle for my personal site because, well, everything has a dark theme these days right?\nI've spent a lot of time with the composition api recently and after starting to impliment this with the options api,\nit became pretty obvious how much code readability would improve by using the composition api and abstracting the functionality\nto a separte file."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Important note here: I am using the "},{"type":"element","tag":"a","props":{"href":"https://github.com/vuejs/composition-api","rel":["nofollow"]},"children":[{"type":"text","value":"vue-compositon-api-plugin"}]},{"type":"text","value":" because I am adding this functionality to my gridsome site which is still using Vue 2.x."}]}]},{"type":"element","tag":"h3","props":{"id":"composables"},"children":[{"type":"text","value":"Composables"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I'm going to start by creating a "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"composables"}]},{"type":"text","value":" folder in my "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"src"}]},{"type":"text","value":" directory. This is totally optional, but I assume this is going\nto become the best-practice when it comes to drectory structore and code organization. I'm naming the folder "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"composables"}]},{"type":"text","value":" because\nthese function abstractions are called "},{"type":"element","tag":"a","props":{"href":"https://composition-api.vuejs.org/#code-organization","rel":["nofollow"]},"children":[{"type":"text","value":"composition functions"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"usethemejs"},"children":[{"type":"text","value":"useTheme.js"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now inside the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"composables"}]},{"type":"text","value":" directory, I'm going to create a new file, "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"useTheme.js"}]},{"type":"text","value":". "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"useX"}]},{"type":"text","value":" is also a future best practice, and\nis the "},{"type":"element","tag":"a","props":{"href":"https://composition-api.vuejs.org/#code-organization","rel":["nofollow"]},"children":[{"type":"text","value":"encouraged way to name"}]},{"type":"text","value":" your composition functions."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It is a recommended convention to start the function's name with "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"use"}]},{"type":"text","value":" to indicate that it is a composition function."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Inside "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"useTheme"}]},{"type":"text","value":" I'm going to add some boiler plate:"}]},{"type":"element","tag":"pre","props":{"className":["language-js"],"code":"import { ref } from '@vue/composition-api';\n\nexport default function useTheme() {\n    const currentTheme = ref('light');\n\n    function toggleTheme() {\n        // @TODO\n    }\n\n    return {\n        toggleTheme,\n    };\n}\n","language":"js","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { ref } from '@vue/composition-api';\n\nexport default function useTheme() {\n    const currentTheme = ref('light');\n\n    function toggleTheme() {\n        // @TODO\n    }\n\n    return {\n        toggleTheme,\n    };\n}\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Key things to note here:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"I'm importing "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"ref"}]},{"type":"text","value":" from "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"@vue/composition-api"}]},{"type":"text","value":". In a normal Vue 3 application this would just be "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"vue"}]},{"type":"text","value":", but I'm using the composition api in a Vue 2 app with a plugin."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"I'm initializing a ref called "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"currentTheme"}]},{"type":"text","value":", which is being initialized with a default value of "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"light"}]},{"type":"text","value":". This will be the default theme when a user visits."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"I'm returning "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"currentThem"}]},{"type":"text","value":" and the function "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"toggleTheme"}]},{"type":"text","value":" from the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"use"}]},{"type":"text","value":" function. This is important to how this all works and I'll explain in more detail later."}]}]},{"type":"element","tag":"h3","props":{"id":"toggling-a-theme"},"children":[{"type":"text","value":"Toggling a theme"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now I'll impliment the toggle theme function:"}]},{"type":"element","tag":"pre","props":{"className":["language-js"],"code":"import { ref } from '@vue/composition-api';\n\nexport default function useTheme() {\n    const currentTheme = ref('light');\n\n    function toggleTheme() {\n        if (currentTheme.value === 'dark') {\n            setLightTheme();\n        } else {\n            setDarkTheme();\n        }\n    }\n\n    return {\n        currentTheme,\n        toggleTheme,\n    };\n}\n","highlights":[7,8,9,10,11],"language":"js","meta":"{codeTitle: useTheme.js}"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { ref } from '@vue/composition-api';\n\nexport default function useTheme() {\n    const currentTheme = ref('light');\n\n    function toggleTheme() {\n        if (currentTheme.value === 'dark') {\n            setLightTheme();\n        } else {\n            setDarkTheme();\n        }\n    }\n\n    return {\n        currentTheme,\n        toggleTheme,\n    };\n}\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"...That's it!"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"wtf?! üòí - you, probably"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dad jokes aside, lets impliment those two theme functions!"}]},{"type":"element","tag":"pre","props":{"className":["language-js"],"code":"function setLightTheme() {\n    currentTheme.value = 'light';\n\n    document.documentElement.style.setProperty('--primary', 'var(--purple)');\n    document.documentElement.style.setProperty('--background', 'var(--bg--light)');\n    document.documentElement.style.setProperty('--text', 'var(--text--light');\n    document.documentElement.style.setProperty('--link-text', 'var(--link-text--light');\n    document.documentElement.style.setProperty(\n        '--active-link-text',\n        'var(--active-link-text--light'\n    );\n    document.documentElement.style.setProperty('--shadow', 'var(--shadow--light');\n    document.documentElement.style.setProperty('--quote-bg', 'var(--quote-bg--light');\n\n    process.isClient && localStorage.setItem('theme', 'light');\n}\n","language":"js","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"function setLightTheme() {\n    currentTheme.value = 'light';\n\n    document.documentElement.style.setProperty('--primary', 'var(--purple)');\n    document.documentElement.style.setProperty('--background', 'var(--bg--light)');\n    document.documentElement.style.setProperty('--text', 'var(--text--light');\n    document.documentElement.style.setProperty('--link-text', 'var(--link-text--light');\n    document.documentElement.style.setProperty(\n        '--active-link-text',\n        'var(--active-link-text--light'\n    );\n    document.documentElement.style.setProperty('--shadow', 'var(--shadow--light');\n    document.documentElement.style.setProperty('--quote-bg', 'var(--quote-bg--light');\n\n    process.isClient && localStorage.setItem('theme', 'light');\n}\n"}]}]},{"type":"element","tag":"pre","props":{"className":["language-js"],"code":"function setDarkTheme() {\n    currentTheme.value = 'dark';\n\n    document.documentElement.style.setProperty('--primary', 'var(--teal)');\n    document.documentElement.style.setProperty('--background', 'var(--bg--dark)');\n    document.documentElement.style.setProperty('--text', 'var(--text--dark');\n    document.documentElement.style.setProperty('--link-text', 'var(--link-text--dark');\n    document.documentElement.style.setProperty(\n        '--active-link-text',\n        'var(--active-link-text--dark'\n    );\n    document.documentElement.style.setProperty('--shadow', 'var(--shadow--dark');\n    document.documentElement.style.setProperty('--quote-bg', 'var(--quote-bg--dark');\n\n    process.isClient && localStorage.setItem('theme', 'dark');\n}\n","language":"js","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"function setDarkTheme() {\n    currentTheme.value = 'dark';\n\n    document.documentElement.style.setProperty('--primary', 'var(--teal)');\n    document.documentElement.style.setProperty('--background', 'var(--bg--dark)');\n    document.documentElement.style.setProperty('--text', 'var(--text--dark');\n    document.documentElement.style.setProperty('--link-text', 'var(--link-text--dark');\n    document.documentElement.style.setProperty(\n        '--active-link-text',\n        'var(--active-link-text--dark'\n    );\n    document.documentElement.style.setProperty('--shadow', 'var(--shadow--dark');\n    document.documentElement.style.setProperty('--quote-bg', 'var(--quote-bg--dark');\n\n    process.isClient && localStorage.setItem('theme', 'dark');\n}\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The accompanying styles:"}]},{"type":"element","tag":"pre","props":{"className":["language-css"],"code":"/* variables */\n:root {\n    --purple: #6200ee;\n    --purple-dark: #400088;\n    --teal: #04dac6;\n\n    --primary: var(--purple);\n    --primary-light: hsl(265, 70%, 95%);\n    --primary-dark: #5d3991;\n    --secondary: #04dac6;\n    --white: #fafafa;\n    --off-white: #ffffffcc;\n    --black: #1a1a1a;\n    --darker-grey: #333;\n    --dark-grey: #4e4c4c;\n    --grey: #718096;\n    --gray-light: #718096;\n\n    /* Dark Theme */\n    --bg--dark: #000c1d;\n    --text--dark: var(--off-white);\n    --link-text--dark: var(--off-white);\n    --active-link-text--dark: var(--secondary);\n    --shadow--dark: #121212;\n    --project-border--light: var(--primary);\n    --quote-bg--dark: rgb(2, 55, 81);\n\n    /* Light Theme */\n    --bg--light: var(--white);\n    --text--light: var(--darker-grey);\n    --link-text--light: var(--dark-grey);\n    --active-link-text--light: var(--primary);\n    --shadow--light: var(--grey);\n    --project-border--light: transparent;\n    --quote-bg--light: var(--primary-light);\n\n    --background: var(--bg--light);\n    --text: var(--text--light);\n    --link-text: var(--link-text--light);\n    --active-link-text: var(--primary);\n    --shadow: var(--shadow--light);\n    --project-border: var(--project-border--light);\n    --quote-bg: var(--quote-bg--light);\n}\n","language":"css","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"/* variables */\n:root {\n    --purple: #6200ee;\n    --purple-dark: #400088;\n    --teal: #04dac6;\n\n    --primary: var(--purple);\n    --primary-light: hsl(265, 70%, 95%);\n    --primary-dark: #5d3991;\n    --secondary: #04dac6;\n    --white: #fafafa;\n    --off-white: #ffffffcc;\n    --black: #1a1a1a;\n    --darker-grey: #333;\n    --dark-grey: #4e4c4c;\n    --grey: #718096;\n    --gray-light: #718096;\n\n    /* Dark Theme */\n    --bg--dark: #000c1d;\n    --text--dark: var(--off-white);\n    --link-text--dark: var(--off-white);\n    --active-link-text--dark: var(--secondary);\n    --shadow--dark: #121212;\n    --project-border--light: var(--primary);\n    --quote-bg--dark: rgb(2, 55, 81);\n\n    /* Light Theme */\n    --bg--light: var(--white);\n    --text--light: var(--darker-grey);\n    --link-text--light: var(--dark-grey);\n    --active-link-text--light: var(--primary);\n    --shadow--light: var(--grey);\n    --project-border--light: transparent;\n    --quote-bg--light: var(--primary-light);\n\n    --background: var(--bg--light);\n    --text: var(--text--light);\n    --link-text: var(--link-text--light);\n    --active-link-text: var(--primary);\n    --shadow: var(--shadow--light);\n    --project-border: var(--project-border--light);\n    --quote-bg: var(--quote-bg--light);\n}\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"So in these functions I'm:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Setting the value of the currentTheme, because I need to keep track of what the active theme is."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Using the native browser "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"setProperty"}]},{"type":"text","value":" function, I'm finding the CSS variable that I need to change, and then passing in what I want the new valule to be."}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If this is your first time seeing "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"setProperty()"}]},{"type":"text","value":" I "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"highly"}]},{"type":"text","value":" recommend checking out "},{"type":"element","tag":"a","props":{"href":"https://davidwalsh.name/css-variables-javascript","rel":["nofollow"]},"children":[{"type":"text","value":"David Walsh's article"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The last line here is very specific to my development environment. Since I'm using Gridsome, when my site is built on Netlify it's going to run through all Vue components and turn them into static HTML. "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"localStorage"}]},{"type":"text","value":" does not exist in Node, so trying to access it here will cause the build to fail. I'm using "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"process.isClient"}]},{"type":"text","value":" to check if the current environment is in the browser. If it is, then it executes this line, setting the current theme in local storage. If not, the line is just skipped."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"x && y()"}]},{"type":"text","value":" is just shorthand for "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"if(x) { y() }"}]},{"type":"text","value":". If the first value is true, the latter is executed."}]}]},{"type":"element","tag":"h3","props":{"id":"adding-the-composable-to-a-vue-component"},"children":[{"type":"text","value":"Adding the composable to a Vue component"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now to actually "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"use"}]},{"type":"text","value":" this new functionality, it needs to be imported to a Vue component!"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I'm only going to show the relevant pieces here, but my personal site is open source and I definitely encourage you to check out the "},{"type":"element","tag":"a","props":{"href":"https://github.com/Roninii/portfolio/blob/master/src/composables/useTheme.js","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"https://github.com/Roninii/portfolio/blob/master/src/layouts/Nav.vue","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the template, I'll add a button with a click handler that points to the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"toggleTheme"}]},{"type":"text","value":" function.\nThis is just a regular 'ol button element with a "},{"type":"element","tag":"a","props":{"href":"https://fontawesome.com/icons/lightbulb?style=regular","rel":["nofollow"]},"children":[{"type":"text","value":"font awesome lightbulb icon inside"}]}]},{"type":"element","tag":"pre","props":{"className":["language-html"],"code":"<button @click=\"toggleTheme\" class=\"theme-toggle\">\n    <i class=\"far fa-lightbulb\"></i>\n</button>\n","language":"html","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<button @click=\"toggleTheme\" class=\"theme-toggle\">\n    <i class=\"far fa-lightbulb\"></i>\n</button>\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the script tag, I'll import the composable, extract the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"toggleTheme"}]},{"type":"text","value":" function, and return it from the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"setup"}]},{"type":"text","value":" function so it can be referenced in the template."}]},{"type":"element","tag":"pre","props":{"className":["language-html"],"code":"<script>\n    import useTheme from '~/composables/useTheme';\n\n    export default {\n        setup() {\n            const { toggleTheme } = useTheme();\n\n            return {\n                toggleTheme,\n            };\n        },\n    };\n</script>\n","language":"html","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<script>\n    import useTheme from '~/composables/useTheme';\n\n    export default {\n        setup() {\n            const { toggleTheme } = useTheme();\n\n            return {\n                toggleTheme,\n            };\n        },\n    };\n</script>\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Notice how I'm destructuring "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"toggleTheme"}]},{"type":"text","value":" from the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" value of "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"useTheme"}]},{"type":"text","value":"? This is what I mentioned earlier. Some of you that have been working with javascript\nfor a long time might have already recognized what's going on here. "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"toggleTheme"}]},{"type":"text","value":" is using a "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures","rel":["nofollow"]},"children":[{"type":"text","value":"closure"}]},{"type":"text","value":" to keep the\nreference to "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"currentTheme"}]},{"type":"text","value":" in sync!"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Closures are a huge and complicated concept that is out of the scope of this article. They're 100% worth learning though, and "},{"type":"element","tag":"a","props":{"href":"https://ui.dev/ultimate-guide-to-execution-contexts-hoisting-scopes-and-closures-in-javascript/","rel":["nofollow"]},"children":[{"type":"text","value":"this"}]},{"type":"text","value":" is a great article to start with!"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now when the user clicks on the lightbulb:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"toggleTheme"}]},{"type":"text","value":" function will be called,"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The value of "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"currentTheme"}]},{"type":"text","value":" will be checked, and the appropriate theme function will be called."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This works!\n"},{"type":"element","tag":"img","props":{"alt":"ronini.dev toggling between dark and light mode.","src":"/gif/dark-mode-toggle.gif"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"saving-the-users-preference"},"children":[{"type":"text","value":"Saving the user's preference"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Some of you might've noticed that in the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"set[X]Theme"}]},{"type":"text","value":" functions, the current theme is being saved to local storage. This is so that the user's preference for dark or light\ntheme can be saved. However, as the code stands, nothing is actually "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"done"}]},{"type":"text","value":" with this data, and in fact, it causes a bug. So to take care of that,"}]},{"type":"element","tag":"pre","props":{"className":["language-js"],"code":"// ...\nexport default function useTheme() {\n    const currentTheme = ref('light');\n\n    if (process.isClient) {\n        // check local storage for saved theme preference and set it\n        const themePreference = localStorage.getItem('theme');\n        if (themePreference) {\n            currentTheme.value = themePreference;\n            currentTheme.value === 'light' ? setLightTheme() : setDarkTheme();\n        }\n    }\n//...\n","highlights":[5,6,7,8,9,10,11,12],"language":"js","meta":"{codeTitle: useTheme.js}"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ...\nexport default function useTheme() {\n    const currentTheme = ref('light');\n\n    if (process.isClient) {\n        // check local storage for saved theme preference and set it\n        const themePreference = localStorage.getItem('theme');\n        if (themePreference) {\n            currentTheme.value = themePreference;\n            currentTheme.value === 'light' ? setLightTheme() : setDarkTheme();\n        }\n    }\n//...\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here, "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"process.isClient"}]},{"type":"text","value":" is being checked again so that this doesn't fail during build, as mentioned earlier.\nIf the code is being executed in the browser, the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"themePreference"}]},{"type":"text","value":" is retrieved from the user's "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"localStorage"}]},{"type":"text","value":". If the value\nof "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"themePreference"}]},{"type":"text","value":" is truthy, then the value of "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"currentTheme"}]},{"type":"text","value":" is set to the retrieved value, and then the appropriate "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"set[X]Theme"}]},{"type":"text","value":"\nfunction is executed so that the the user's preference is now set on load!"}]},{"type":"element","tag":"h3","props":{"id":"conclusion"},"children":[{"type":"text","value":"Conclusion"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I had a blast implimenting this, and being able to pull all this logic out into a separate file and use the power of JavaScript's modularity is\nan awesome feeling. Did you anything? Did you notice an implimentation detail that could be improved? Be sure to let me know on twitter!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As always, until next time üññüèª"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"composables","depth":3,"text":"Composables"},{"id":"usethemejs","depth":3,"text":"useTheme.js"},{"id":"toggling-a-theme","depth":3,"text":"Toggling a theme"},{"id":"adding-the-composable-to-a-vue-component","depth":3,"text":"Adding the composable to a Vue component"},{"id":"saving-the-users-preference","depth":3,"text":"Saving the user's preference"},{"id":"conclusion","depth":3,"text":"Conclusion"}]}},"_type":"markdown","_id":"content:blog:theme-toggle-composition-api.md","_source":"content","_file":"blog/theme-toggle-composition-api.md","_extension":"md"},"hash":"0z2nz7TPxZ"}